language: ruby
sudo: false
bundler_args: "--without kitchen_vagrant"
rvm:
- 2.1.5
branches:
  only:
  - master
  - develop
before_script:
- openssl aes-256-cbc -K $encrypted_8956bd4cabb0_key -iv $encrypted_8956bd4cabb0_iv
  -in travisci-aws.pem.enc -out travisci-aws.pem -d
- chmod 0600 travisci-aws.pem
script:
- git clone https://github.com/twindb/twindb-agent-testing.git
- cp travisci-aws.pem ./twindb-agent-testing/
- cd ./twindb-agent-testing
- bundle install --without kitchen_vagrant --binstubs --path vendor/bundle
- "./bin/rake travis"
env:
  global:
  - secure: U98iOBuiSIfwjJqHhUzsksyP9ssj+fwP2tNhITOdzcaIgLaV2RH4UqxuAtQyk/NPMN8jTBmIkDirEGaWvx39/8E2RJsob9X0B7Fn6IqQU9L50Y9toVG5e1739kUW/+mtfmscvP37NcHF50tSUJAjcn5G2liGfIKHWEBn5iVGFDAqNF8YjIhtKkksX8eeSoWIfVVF110LY9n3bRjhlTPU1sWT2jSvmSlfMErdy4mhqk5syQFJK6rOXA/aiLYq065ZnRzYFeqkyfa1mVZl1JiMNtC+9+8hT+N8C7ltBQeVhx5tndtYLHbDUZrW0jwQb0GejH1TU40LEvsce0MR4kVr7Wd9rjzMdqqwqi8ljN4EXM6GeWEEiDegS3CCA8fymk6xW6BKGWTkQnZ+pqEiOniYi8Tig9YzhRl/bqPpG4HpesZbsT7qv7Xn2zGvQ2EJhF+iHT9WZHWS8WuHA2LXarMoh6nKybXaTS/hjNVtoHtjDKxUgbOM91yHXLEblV8gjUokp5y3iYDf+f+gkPKOfF8ANIztgbdSYsUG0b9FnQv+/xgoxv0C8055PJ63nNB5PLn68zPMTia7QisqspwCMAh3g3ohW0OzCzA546rsnWpg8ZsaBTuyL9yolZsVnNfJkdOAbNCnOzuq2c7XsuTlwaCnUY/dq3r2Xf+XFB9OUXMQRj8=
  - secure: K3VcfOPmGeMT+jkTtk1AaPIGE6zp/Q3g3J/78GcJXbh7UmF9UL8JupT7IhbCR0Tby+W/iIEkHjImeVlymg6h8ZcL3B0c9M7rr63KEIXrevGZtW+DRsyt5Z6/krbXPBlK68pn9avOZkHYsfzcigJYXw5Yx1XcOEP6jfxZ2tmLkwjorN8qNnWPGjfuCnAfYitsfsXNKBQQITkZFiVL4aCDIwDXONUxNXX/ONVmbBEHeyqB55oPDrmldden4hrGMnAy9KrKk6sbQtqkkMHQtKzNmm9hStPcm6ZPUBqPv6GWDFgtwAiDZlx0S5oMwi65Ns1ptp7mhj/HZBO0MpGj7Q7ojlhF7hdbZl/a1JE3shIAtx95ew84hpskQCcgm1EtZWMubnBncTzFlbm8qQAcAbyqrYP/7c03WoChavh/g/LyhnNHPrlxaD5atoLcwgk9kTPDYKaWx0EetB+51AQGu3bp4apEFS9eJbVosnCe8XzsrZj31F8raIlPJGlBkU169eKji/jlKjIOjMyxLPmNBmFDmQDxcFyFULxgKZvGaFRuAqnQq/NbdN4KlWxDbshNlK2ibpmG8hgZfU//NKZBluUzIhIX6rtPsNHxLC8rEhAbb8IcbEwwMFkH7C+y7BHvi7RZImEx32SUNTpJtnVtZ23HKEet8tlSj65//cmuNgYHmkI=
  - secure: CKBALMMS8qAAZ93V59HSJpPELNb2ztuOtXq5MYSNQ1jBQ1f2mL1B2v2n2GgRO+SGLCdzNnU8bVeEKBwSSBDLPcHJGLGupkESN0uQ9+FpL7WjXIStsiQOabKSMROS/LtZ//YtajVwQdIV0lpQz3b15HF8tE9D8fPxjfTOd+dBBrquwAthAWLiiMx7PzmEvsQPRN/aSKHIwm7nUcRvOhWSET2iZLNaTDEkxgom7bZdx5rZf8ioDBc4gnfL+x9KOmqLiiDlhtb5xEoCfAGt4W55yGdXJVHosAz8zp+6VUoMSOy20pvsGODEAoMvKwE6UMKjeYL3vTyKjc27yUYBTvLBp5oY+eJfXy/krOpHeHfkf3weKB2NkqoArS0lN1noyKObNSRcoQ+yGwRGBeJ5AnBZ8sBIfqLqtGJgRXEUDkv+SXXLZcpP7UKS1Upv0Bi3PF1pxcLqaYL9C7utiQq2KLgSYMN4HP+VGknq6PL/x904HW9CqIXQNd9kQEE4/e92a0qFTLRUnmCluU2lvrQs+c9+bSab6TDRDCy1wHcVPUR83FvuTQZApdNQ3rFY3IHCm7Tb70zrd19CsKcRCujHbccxc617ntb3FzqrMsaBolrSUtxZEMwD6bsRxyd30sIocTRqi82NpivF/jUicUzXklYtFqIVqY3n2fbNxxXdOfXqvQE=
  - secure: jqXIdrqD6ijI05+eYGDV8YUn7sOp5Qj+S6UUTUiNAuBEVdRYx8KHRI+Ca6o3XIRyo6iuefm8/gK4J2wtGyJ8XGTmGSXQkXj3dPkq2xmZXuqE4hJfkWuFlvKuLbH0vy/qAhuaIPiQZ48XJQxttbo7p+XWWIWN4z8tbkK4AkUJE35brYFh4FbiUCzBRcEnQitsHVSzodYy6FS/OjcvLNLjpyi60qi1p8Ql4DuglBH8XUkExQVsvd/RGUu3kquS6DmD7s3ZHWEP5SL+3jBMBUqPdHp1qLKFguR/Fp49H3eUgDXQ4EM61jNVYe7R2gk6W1KGU2rHsKVbW0jcOT8MQzrhrM/XDCre2YxT89waKuRkmXR8ZiSyFeCt06tHFRNImbfCt2sBfk0aUr8vHKQYGCclj0euKYNpxUwzlB0KaTn0H+3IOyga6LheVvKSZ4K/NPcDl4jz2fV4VlKkLpiccIKFhb5kRjocV64jnWrVsOUYn1WQTMp7dMWllAfpaXmYlpHDRWVtc97ZPGb2EPgfP3J4yrNCZVtTK3evjY+CKMHpoRzByfhFy/Qft7h6dRJ03oJ7lZpJNZOFpa+TTZTR1BMfDunb46QaI85qtSoojbyODa0zLHbAtKdhWIeobdva57zvJyg1ZKprZOj2Nw2LpI+3EhnLtdJxByqmxI76nry4FAw=
  - secure: C/ZMgODcCbd3fHQ6Wuc1a9vHP/YFFPB/mFYTHTUl0/T/mkdtmKx7TbcxDCNdktl6KK2xUf7jmBwnf42qIihGQkT7/ifDvYC9HJ+z6q3twfzRqD5VLApPBn4X/L7BiUbeQ2eADcIGjH6koS+dzjjGTmqQi0YfgCdhQassJUnC4LTdK4HuDPKGPzu1rKs4MzLhBjhIBYrumZxG00x6XjSZM9SF4mXO3P78Nwgder3sMZQ/b7o2AOLWhTYyaaSIdmRJ8JQDGTyhuRWSBbuyZcYXnTtCGuQvXeudi90TVPN1Bw2/o6Y5clr7GBLV2IB32ontq8J4RKuu5aPkphDYnx6gZmEZEHlzsx0nJXY6vFKDlX/8sj6gAWH43kJtjFziRsvTPqEgyAX0pWZqK7R/rGqNlhvI7owxsDnCw0okGC6w04dMphZP9XzprKnAQnR0rYovclCP+Qyh6cSDJfW3i4dQ6e1ynFVW4gbnqLDigogDImqaVrXCnj70d5Od/nwLtrXf4EzjFkYP+86fgJSk3fnIQLr5NyGAAS+5pK2sEY2Ea0swK0I3uyl9nP+u/AVRt9ma0xO8dkb/5JCSk5ArnMOnku2H/dPFgLdk7lO/kLmTg22j06NOvoTO1vICv7DBazLYVgCl+Q61NwfowpyAg54PjA7LF2fzvciCOiU8rAGNF+E=
  - secure: BW2t47tFffWJnBgHCins/tMbBnBAgoa5+Om6Ps7ZcYX/KcJ4n2UzJrkf/m9JZu3ZEiK4FgE+B3U15IeYGlhGtzgl4ErXByvzN7o4COjMib/QWP1auoKTgQeM8RMBDT82TKYCGmH1yfBg19xwECT3fz8KK6bixUZYVadau2a8R0X/k5EVSZNosw9LyOscTjg6MEJas6lslVt9AE1OOi0JRhDzMKHeCHVWcITRbCGBc/5Ad07mVu4v2GIpVz69n4qPcnHWTJBa85RfxfIw2HKiJ70nc3gY/TXlxWvp/2uh/gvdemspMLr5Z+GwOrmcncZt14tfXmKQWaBNrBLXinY8YuShuuQ6Wl1+pMLAAwkDZz/f07aZTuFkH063vceTR3xmC48+g6ReKEU5qNkwHfpHUampYXr55ZYU68KKuAjePAI14ODkSf1w61huWoLtGtOx6FR5b3CPz0g7V+hoE1C9cPsRbs552Ysvqn4UTpIpW8UnDkgZ0Zr46ZYn08OXpooMa3NQ3MUVaQepl+oOkKYLY/bY1CbJSfU6NpRjoLcEWXoETUIQ/Kcc6OugjM0jxoH7VjxaPZ6duqf/Vk1oGCPlVIUwzf/kKPFatlXYFF6sxHRDrsMY+DKg0d/0GJHTTqxzkkcHTQx99zTiQk/e4hgl28pRnYsqGlOXOZ/z7zMaTyM=
  - secure: bBpr9bcoqqw/Ln0PR+EhMaBqkszGXjVJ0d6GNMRjoGvZvPiMuyA6CfQ+T8xiAqXRreBRJbr33pa96KdVFsGi3f/lhrmPe3p5Ry+cctTw+svOiYgyXdYfR9WmMn6AbGbQcUBIzHFy4ylSNQsnIVE/wyioJgeTg69fU0Wat7kycz7TsuyOaRYK7CjN3VWdJZIl1ys+XOFv5662oUIodSYH1P2zjiNAqiaYvEbQ1Jpne1w4IDzYPl15oxdv9RKAE4qpIBtU5zUKFHEtdsjcAUZGkb8mUgMAoUAOY/pmE6nqpHmG3XoyClS49+KXeARF46HZmuXes7Efg5Q4xG16w6SxdBsZUr3z7mUK6TATLbKbdJ4/9lRIjXeyRwVxB3/BLFE1I4T0eDSetaU6W7aYu0v8w3HgXPL2P33mixY1IGG6tJ0MavNng9m6l0RTZ1kXalhSx/hyPh3RI6dMI0YoO0GwfC6RdhyiqbFHRJLfqSmDwN1bwYoiMS/joHt23WiwBSMTAXzHWL8R7qoVpN28dZNyUy6XI5fNqfZ5bCYa+EHw0t/GMk6cTlYzpPnVdnyTKSlM0/pIcC8/P2vcU0rc3IQYauN4/LWEeElEdm/jZSoatKEnNXfVQexP4RJILjzoE4Mt8rsS/7/A14Pl1F/UlvMPDOrfw1XFDnVLVfMaybMfsHw=
  - secure: XTzdn5BaM9U+oxq5aX0UgQ8jxzl8poytNyFPJ6Rd0ScKdvD/R1CsP+p8DS6cxCL8DiHPPNVvQGZb9Wcdm1dzC4V1AnPsoY8YRTeaGNDP9YPg7Et/O+NLSjqln3bwJffwTXPWYCmw8ATuxTin/7qlho2Wlme6AoVFaeNSiS6BxTy3aOUUi3L64Xuo5ZUhWA85WBhadm147vtpzKL8GpI3eJbWHjWHIW1NN9vfVUzYCx8m0aoFe0AMI9m6OaSUjnSMl7cy2yMkpm0Q0ISmWN31hRe9rue0KJvxJSqu8SPqM1wmrChJTLrXpGskqa98qzoCgS8nJ1lQaZq9vUcMSeIxmkrQXU9Kyptc+M53di21zAgwzx1IyP0jjd6Y0SEdVrhMR3UBzs9vlHn0vWXnfkX2yFY8o3WVPytLscPWutd0nrorMYS/qYVF/yGeair1sdTap1BHwMp3xXp6Z+aHbEQPWd+GE267qd2lqv3yze/mX4d0z2mSM8CwIus3IB7igi9BnbquUgNq+yrfrjP8khEAf8R9YihBoVqAWuywMvZWFrPEYNp5YZ99UvEr+YLI1eRDLf8j98AWnW+AKgSbzG8p6qyrr8UzkNdWAFdO9oahVE9/3hou0N4jcznfl/7XzBFIRFYH8KLUTqii+Ws8vR82JDjnmPLpYF7/kbstIGKLmfo=
  - secure: gDqYxETe18n/zkOaW9CodXqy7BFZB6svA3xWLrvAhNNRtWbreTMyrEM6JYouqkLbzb3SyFRyecSWzFAJ1ldE13HhLNtSEuevd5SBDRKr23aJZMrSzLe1G9wP7xy0ygNsf69VBIic8v3jYBsMJpTtwT52swgXYQbu4Qr/BlIV++09CGW2nHvT3YKpa/5PV0tLz2D2+fKWmTDOHGJzteRoM8liP1hR/8nHdj+jToqf/pNVXiexBfnFLeHQj00rV8jbi60r8QU87lSnXyR/hoHj93H4QSK21hXCfCcwtEDJ/XLQXrOD0qBSBBU+t37/1oegAiFX8Zo8oyJNBbyv0Djnj+hHWTZX2zZntMJip8LLMt7/Vdf6LtJdgcuFQ1R07zCEKjBBpTp5jgfRw0NYdaG0cJ/BquqI9Fk4RIod9GXz0Tsj6axP8rnApDgX9CqlJWbu95Z65286AVxOggow+kO44ANqbBwmfiU0D/A5g9/Pkc7deBFPY+EMPe3FX6OfhJIu8/NDVBKilfji9ZkL83WJpjbFo8YRTsxsd1WU/lsug3AyVRx/HaV+2Md/a/mj86cOUbxwiIfsnFVFBts7Fjwy7tsYSPfB/YUOofLs6l+z1RC4fPS52fg30QVeUScQpsYQ9rj9S4R9mO/a0CUHuDr73wP+IlCK0LFu9uhSV4GrRiI=
notifications:
  webhooks:
    urls:
      secure: RjeUvztC/Rwj/vJ+10v8u/aSzRuBFvzElGCMLufFkLs+MAtlre9F55zacxJFR+/rt3oBOzIUoJA1mWE9ERLrYlSBncaDyOAARrNCA4AViP+FW+qZcNlH0oVQaBAb/guZCm+IO+qgckmU4zfzfdJsunrdWE91cFLhQnZk4ZD3aE7cUPEADnlgV4TeC/LHGGW+5RbRnRKMExqdjzyFbotkfsLp23P8ltC1Xm3+LABvblgd5DRHBbZXBpLLM+tutU7iyW3jbLXOVssjSdFYKNCL4r6CV24QW6D+9ebpLylpRqwZYJosgJseG37OY5NmnSAranSUA1w6ss+dgx8ZTgU7ohwwUGKmlt/g5EMshEnSFzH16PRYkMsg69b0Ao8zcbyQPuDZnIuWF3IobNyR9cT1YyCzlOkDEcb3KppNzL1/4FW9mnFW9r1Zunu//PiZie5EI/p2SHG0LwUw2j34qx92bhrzwQM2BpgxE2UyAOfRK/rd8NMVtfWKFlKQD47FvG9kEIJn2VOjpBOz9ZGqVPW/5ppuvPT0GUb7jjvHpR+mDtdlGeGlaKFhbmhOv3dTHzRoebdcXTk4R9tkZxYOZxmY+sio2ewCttwuW2VI1+sufgGEWbyJjyePIHbuZ6PFnwd2/d+Wa04zJF4lzthEl4UkApJyb/hp2Tguvyx1Jw6qlSE=
    on_success: always  # options: [always|never|change] default: always
    on_failure: always  # options: [always|never|change] default: always
    on_start: always     # options: [always|never|change] default: always
